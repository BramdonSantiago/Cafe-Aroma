<div class="quick-cart" [ngClass]="{ 'show-quick-cart': isVisible }">
    <h5>Carrito de Compras</h5>
    <div (click)="closeCart()" class="quick-cart-close">
        <i class="fa-solid fa-xmark"></i>
    </div>
    <div class="products mt-10">
        @for (product of products; track product.id) {
        @defer (on viewport) {
        <div class="grid grid-cols-12 items-center gap-4 product">
            <div class="col-span-3">
                <img [src]="product.image" [alt]="product.name" class="w-full" loading="lazy" />
            </div>
            <div class="col-span-6">
                <div>
                    <div>
                        <h3 class="product-name mb-4">{{ product.name }}</h3>
                        <div class="mb-2">
                            <!-- <app-quantity-control [minQuantity]="product.minQuantity"
                                [maxQuantity]="product.maxQuantity" (valueChange)="product.quantitySelected.set($event)"
                                dimension="small"></app-quantity-control> -->
                        </div>
                        <p>
                            <span class="product-price">{{ product.price * product.quantitySelected() | number:'1.0-0'
                                }} {{ product.currency }}</span>
                            <span class="product-quantity ml-2">x{{ product.quantitySelected() }}</span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-2">
                <button type="button" class="btn-delete" (click)="removeProduct(product.id)">
                    <i class="fa-solid fa-trash mr-2"></i>Eliminar
                </button>
            </div>
        </div>
        } @placeholder {
        <div>
            <p>Cargando producto...</p>
        </div>
        }
        }
    </div>
    <div class="my-4">
        <p>Total: <span class="total">{{ totalBuy() | number:'1.0-0' }} USD</span></p>
    </div>
    <div class="flex flex-col xl:flex-row justify-between gap-4 btns-cart mt-8 px-4">
        <button (click)="closeCart()" class="btn btn-primary">Seguir comprando</button>
        <button class="btn btn-secondary">Pagar</button>
    </div>
</div>
